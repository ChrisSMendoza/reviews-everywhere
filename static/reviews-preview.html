<!DOCTYPE html>
<html>
    <head>
        <!-- TODO: Fix this, CORS and MIME type issue -->
        <!-- if development -->
        <!-- <script type="module" src="http://localhost:5173/@vite/client"></script>
        <script type="module" src="http://localhost:5173/main.js"></script> -->
    </head>
    <body>
        <form method="post" action="/review">
            <label>
                Review
                <input name="text" />
            </label>
        </form>

        <ul id="reviews"></ul>
    </body>

    <script type="module">
        const reviewsResponse = await fetch('/reviews');

        if(reviewsResponse.ok) {
            const reviews = await reviewsResponse.json()

            reviews.forEach(review => {
                const p = document.createElement('p');
                p.textContent = review.text;

                const li = document.createElement('li');
                li.appendChild(p);

                const reviewsList = document.querySelector('#reviews');
                reviewsList.appendChild(li);
            });
        } else {
            console.warn("Bad status when fetching reviews", reviewsResponse.status);
        }
    </script>
</html>
